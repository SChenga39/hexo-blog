<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/hexo-blog/img/fluid.png"><link rel="icon" href="/hexo-blog/img/fluid.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="SChenga"><meta name="keywords" content=""><meta name="description" content="为什么离开 Windows 微软的监控 盗版的风险  安装完整步骤 下载 Arch Linux iso 镜像文件  使用 中科大镜像   下载 Rufus 刻录软件  写入镜像到 U 盘  开机狂按 Del 键进入 BIOS，关闭安全启动  开机狂按 F11 进入引导项，选择 U 盘  在启动选择界面选择第一项：Arch Linux install medium (x86_64, UEFI)  依"><title>Arch Linux 安装全过程 - SChenga&#39;s blog</title><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css"><style>@font-face{font-family:iconfont;src:url(/hexo-blog/css/font_1749284_hj8rtnfg7um.woff2) format("woff2"),url(/hexo-blog/css/font_1749284_hj8rtnfg7um.woff) format("woff"),url(/hexo-blog/css/font_1749284_hj8rtnfg7um.ttf) format("truetype");font-display:swap}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-success:before{content:"\e619"}.icon-cc:before{content:"\e8e4"}.icon-nd:before{content:"\e90e"}.icon-sa:before{content:"\e604"}.icon-nc:before{content:"\ed48"}.icon-by:before{content:"\e741"}.icon-top:before{content:"\e605"}.icon-author:before{content:"\e7aa"}.icon-light:before{content:"\e6e6"}.icon-dark:before{content:"\e640"}.icon-articles:before{content:"\e61f"}.icon-category-fill:before{content:"\e60d"}.icon-category:before{content:"\e65e"}.icon-chart:before{content:"\e618"}.icon-search:before{content:"\e6f2"}.icon-love:before{content:"\e643"}.icon-eye:before{content:"\e722"}.icon-archive-fill:before{content:"\ef1c"}.icon-date-fill:before{content:"\ef5a"}.icon-home-fill:before{content:"\f017"}.icon-link-fill:before{content:"\f037"}.icon-tags-fill:before{content:"\f0f3"}.icon-user-fill:before{content:"\f12c"}.icon-date:before{content:"\f27d"}.icon-copy:before{content:"\f289"}.icon-list:before{content:"\f2c0"}.icon-tags:before{content:"\e798"}.icon-clock-fill:before{content:"\e67d"}.icon-arrowup:before{content:"\e799"}.icon-arrowleft:before{content:"\f2c2"}.icon-arrowright:before{content:"\f2c3"}.icon-arrowdown:before{content:"\f2c4"}</style><link rel="stylesheet" href="/hexo-blog/css/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/hexo-blog/css/main.css"><link id="highlight-css" rel="stylesheet" href="/hexo-blog/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/hexo-blog/css/highlight-dark.css"><link rel="preload" href="/hexo-blog/css/font_1749284_hj8rtnfg7um.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/hexo-blog/css/font_1736178_lbnruvf0jn.woff2" as="font" type="font/woff2" crossorigin><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"schenga39.github.io",root:"/hexo-blog/",version:"1.9.5",typing:{enable:!1,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!0,baidu:null,google:{measurement_id:null},tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/hexo-blog/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/hexo-blog/js/utils.js"></script><script src="/hexo-blog/js/color-schema.js"></script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/hexo-blog/atom.xml" title="SChenga's blog" type="application/atom+xml">
</head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/hexo-blog/"><strong>SChenga&#39;s Blog</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/hexo-blog/"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/hexo-blog/archives/"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/hexo-blog/tags/"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/hexo-blog/img/default.webp) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle">Arch Linux 安装全过程</span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2023-09-28 00:00" pubdate>2023年9月28日 凌晨</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 5.9k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 50 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">Arch Linux 安装全过程</h1><div class="markdown-body"><h2 id="为什么离开-Windows"><a href="#为什么离开-Windows" class="headerlink" title="为什么离开 Windows"></a>为什么离开 Windows</h2><ol><li>微软的监控</li><li>盗版的风险</li></ol><h2 id="安装完整步骤"><a href="#安装完整步骤" class="headerlink" title="安装完整步骤"></a>安装完整步骤</h2><ol><li><p>下载 Arch Linux iso 镜像文件</p><ul><li>使用 <a target="_blank" rel="noopener" href="https://mirrors.ustc.edu.cn/archlinux/iso/2023.09.01/archlinux-2023.09.01-x86_64.iso">中科大镜像</a></li></ul></li><li><p>下载 Rufus 刻录软件</p></li><li><p>写入镜像到 U 盘</p></li><li><p>开机狂按 Del 键进入 BIOS，关闭安全启动</p></li><li><p>开机狂按 F11 进入引导项，选择 U 盘</p></li><li><p>在启动选择界面选择第一项：<code>Arch Linux install medium (x86_64, UEFI)</code></p></li><li><p>依次执行以下命令</p><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># 禁用 reflector 服务</span>
systemctl stop reflector.service
<span class="hljs-comment"># 检查 reflector 服务是否被关闭</span>
systemctl status reflector.service
<span class="hljs-comment"># 确认当前是否运行在 UEFI 模式</span>
<span class="hljs-comment"># 如果出现一堆东西已在 UEFI 模式，否则需要确认启动方式是否为 UEFI</span>
<span class="hljs-built_in">ls</span> /sys/firmware/efi/efivars
<span class="hljs-comment"># 连接网络: 使用无线连接才需要进行以下步骤</span>
iwctl <span class="hljs-comment"># 进入交互式命令行</span>
device list <span class="hljs-comment"># 列出无线网卡设备名，比如无线网卡看到叫 wlan0</span>
station wlan0 scan <span class="hljs-comment"># 扫描网络</span>
station wlan0 get-networks <span class="hljs-comment"># 列出所有 wifi 网络</span>
station wlan0 connect wifi-name <span class="hljs-comment"># 进行连接，注意这里无法输入中文。回车后输入密码即可</span>
<span class="hljs-built_in">exit</span> <span class="hljs-comment"># 连接成功后退出</span>
<span class="hljs-comment"># 测试网络连通性</span>
ping www.bilibili.com
<span class="hljs-comment"># 更新系统时钟</span>
<span class="hljs-comment"># 这步很重要，关系到后面 pgp 密钥环更新环节</span>
timedatectl set-ntp <span class="hljs-literal">true</span> <span class="hljs-comment"># 将系统时间与网络时间进行同步</span>
timedatectl status <span class="hljs-comment"># 检查服务状态</span>
<span class="hljs-comment"># 修改镜像源为国内，加快下载速度</span>
<span class="hljs-comment"># 推荐使用中科大源和清华源</span>
vim /etc/pacman.d/mirrorlist
<span class="hljs-comment"># =========================</span>
Server = https://mirrors.ustc.edu.cn/archlinux/<span class="hljs-variable">$repo</span>/os/<span class="hljs-variable">$arch</span> <span class="hljs-comment"># 中国科学技术大学开源镜像站</span>
Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/<span class="hljs-variable">$repo</span>/os/<span class="hljs-variable">$arch</span> <span class="hljs-comment"># 清华大学开源软件镜像站</span>
<span class="hljs-comment"># =========================</span>
<span class="hljs-comment"># 分区和格式化</span>
lsblk <span class="hljs-comment"># 显示当前分区情况</span>
<span class="hljs-comment"># 使用 cfdisk 对磁盘分区</span>
cfdisk /dev/nvme0n1
<span class="hljs-comment"># 如果不再使用 Windows，则抹掉硬盘上原来的文件系统</span>
wipefs --all /dev/nvme0n1
<span class="hljs-comment"># 创建三个分区: EFI、Swap 和主分区</span>
<span class="hljs-comment"># EFI: 512M, Swap: 14G, 剩下的给主分区</span>
<span class="hljs-comment"># 分区完成后查看磁盘情况</span>
lsblk
<span class="hljs-comment"># 下面假设</span>
<span class="hljs-comment"># EFI: /dev/nvme0n1p1</span>
<span class="hljs-comment"># Swap: /dev/nvme0n1p2</span>
<span class="hljs-comment"># 主分区: /dev/nvme0n1p3</span>
<span class="hljs-comment"># 格式化 Swap 分区</span>
mkswap /dev/nvme0n1p2
<span class="hljs-comment"># 使用 Btrfs 格式化主分区</span>
mkfs.btrfs -L myArch /dev/nvme0n1p3
<span class="hljs-comment"># 将主分区挂载以创建子卷</span>
mount -t btrfs -o compress=zstd /dev/nvme0n1p3 /mnt
<span class="hljs-comment"># 查看挂载情况</span>
<span class="hljs-built_in">df</span> -h
<span class="hljs-comment"># 创建 / 目录子卷</span>
btrfs subvolume create /mnt/@
<span class="hljs-comment"># 创建 /home 目录子卷</span>
btrfs subvolume create /mnt/@home
<span class="hljs-comment"># 查看子卷情况</span>
btrfs subvolume list -p /mnt
<span class="hljs-comment"># 卸载主分区以挂载子卷</span>
umount /mnt
<span class="hljs-comment"># 挂载子卷 (请务必依次执行下列命令)</span>
mount -t btrfs -o subvol=/@,compress=zstd /dev/nvme0n1p3 /mnt <span class="hljs-comment"># 挂载 / 目录</span>
<span class="hljs-built_in">mkdir</span> /mnt/home <span class="hljs-comment"># 创建 /home 目录</span>
mount -t btrfs -o subvol=/@home,compress=zstd /dev/nvme0n1p3 /mnt/home <span class="hljs-comment"># 挂载 /home 目录</span>
<span class="hljs-built_in">mkdir</span> -p /mnt/boot/efi <span class="hljs-comment"># 创建 /boot/efi 目录</span>
mount /dev/nvme0n1p1 /mnt/boot/efi <span class="hljs-comment"># 挂载 /boot/efi 目录</span>
swapon /dev/nvme0n1p2 <span class="hljs-comment"># 挂载交换分区</span>
<span class="hljs-comment"># 查看挂载情况</span>
<span class="hljs-built_in">df</span> -h
<span class="hljs-comment"># 查看 Swap 分区挂载情况</span>
free -h
<span class="hljs-comment"># 安装系统</span>
pacstrap /mnt base base-devel linux linux-firmware btrfs-progs
<span class="hljs-comment"># 安装其他必要的功能性软件</span>
pacstrap /mnt dhcpcd networkmanager vim sudo zsh zsh-completions
<span class="hljs-comment"># 生成 fstab 文件</span>
genfstab -U /mnt &gt; /mnt/etc/fstab
<span class="hljs-comment"># 查看 /mnt/etc/fstab 确保没有错误</span>
<span class="hljs-built_in">cat</span> /mnt/etc/fstab
<span class="hljs-comment"># 将系统环境切换到新系统下</span>
arch-chroot /mnt
<span class="hljs-comment"># 设置主机名与分区</span>
vim /etc/hostname
<span class="hljs-comment"># 设置 hosts</span>
vim /etc/hosts
<span class="hljs-comment"># =========================</span>
127.0.0.1   localhost
::1         localhost
127.0.1.1   myarch.localdomain  myarch
<span class="hljs-comment"># =========================</span>
<span class="hljs-comment"># 设置时区</span>
<span class="hljs-built_in">ln</span> -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
<span class="hljs-comment"># 将系统时间同步到硬件</span>
hwclock --systohc
<span class="hljs-comment"># 设置 Locale</span>
vim /etc/locale.gen
<span class="hljs-comment"># 去掉 `en_US.UTF-8 UTF-8` 以及 `zh_CN.UTF-8 UTF-8` 行前的注释符号</span>
<span class="hljs-comment"># 生成 locale</span>
locale-gen
<span class="hljs-comment"># 向 /etc/locale.conf 添加内容</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;LANG=en_US.UTF-8&#x27;</span>  &gt; /etc/locale.conf
<span class="hljs-comment"># 为 root 用户设置密码</span>
passwd root
<span class="hljs-comment"># 安装芯片制造商的微码</span>
pacman -S intel-ucode <span class="hljs-comment"># Intel</span>
pacman -S amd-ucode <span class="hljs-comment"># AMD</span>
<span class="hljs-comment"># 安装引导程序</span>
pacman -S grub efibootmgr os-prober
grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=ARCH
<span class="hljs-comment"># 编辑 GRUB 文件</span>
vim /etc/default/grub
<span class="hljs-comment"># =========================</span>
<span class="hljs-comment"># 去掉 GRUB_CMDLINE_LINUX_DEFAULT 一行中最后的 quiet 参数</span>
<span class="hljs-comment"># 把 loglevel 的数值从 3 改成 5，为了后续出现系统错误时方便排错</span>
<span class="hljs-comment"># 加入 nowatchdog 参数，显著提高开关机速度</span>
GRUB_CMDLINE_LINUX_DEFAULT=<span class="hljs-string">&quot;loglevel=5 nowatchdog&quot;</span>
<span class="hljs-comment"># =========================</span>
<span class="hljs-comment"># 如果需要引导 Windows 10 则需要再加一行</span>
GRUB_DISABLE_OS_PROBER=<span class="hljs-literal">false</span>
<span class="hljs-comment"># =========================</span>
<span class="hljs-comment"># 生成 GRUB 所需的配置文件</span>
grub-mkconfig -o /boot/grub/grub.cfg
<span class="hljs-comment"># 完成安装, 这个时候拔掉 U 盘</span>
<span class="hljs-built_in">exit</span> <span class="hljs-comment"># 退回安装环境</span>
umount -R /mnt <span class="hljs-comment"># 卸载新分区</span>
reboot <span class="hljs-comment"># 重启</span></code></pre></div></li><li><p>重启后使用 root 和密码登录 Linux 并执行以下命令</p><div class="code-wrapper"><pre><code class="hljs bash">systemctl <span class="hljs-built_in">enable</span> --now NetworkManager <span class="hljs-comment"># 设置开机自启并立即启动 NetworkManager 服务</span>
ping www.bilibili.com <span class="hljs-comment"># 测试网络连接</span>
<span class="hljs-comment"># 若使用无线连接则先连接网络</span>
nmcli dev wifi list <span class="hljs-comment"># 显示附近的 Wi-Fi 网络</span>
nmcli dev wifi connect <span class="hljs-string">&quot;Wi-Fi名（SSID）&quot;</span> password <span class="hljs-string">&quot;网络密码&quot;</span> <span class="hljs-comment"># 连接指定的无线网络</span>
<span class="hljs-comment"># 安装 neofetch</span>
pacman -S neofetch
<span class="hljs-comment"># 使用 neofetch 打印系统信息</span>
neofetch
<span class="hljs-comment"># 关机</span>
shutdown -h now</code></pre></div></li><li><p>至此，无图形界面的 archlinux 已安装完成</p></li></ol><h2 id="图形界面安装和配置"><a href="#图形界面安装和配置" class="headerlink" title="图形界面安装和配置"></a>图形界面安装和配置</h2><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># 确保当前系统为最新</span>
pacman -Syyu
<span class="hljs-comment"># 配置 root 账户默认编辑器</span>
vim ~/.bash_profile
<span class="hljs-comment"># 添加以下内容</span>
<span class="hljs-comment"># =========================</span>
<span class="hljs-built_in">export</span> EDITOR=<span class="hljs-string">&#x27;vim&#x27;</span>
<span class="hljs-comment"># =========================</span>
<span class="hljs-comment"># 准备非 Root 用户</span>
useradd -m -G wheel -s /bin/bash myusername
<span class="hljs-comment"># 设置新用户的密码</span>
passwd myusername
<span class="hljs-comment"># 同意新用户使用 sudo</span>
vim /etc/sudoers
<span class="hljs-comment"># 找到下面一行并把前面的 `#` 去掉</span>
<span class="hljs-comment"># =========================</span>
<span class="hljs-comment">#%wheel ALL=(ALL) ALL</span>
<span class="hljs-comment"># =========================</span>
<span class="hljs-comment"># 开启 32位支持库和Arch Linux 中文社区仓库</span>
vim /etc/pacman.conf
<span class="hljs-comment"># 去掉 `[multilib]` 一节中的两行注释</span>
<span class="hljs-comment"># 在末尾添加如下内容</span>
<span class="hljs-comment"># =========================</span>
[archlinuxcn]
Server = https://mirrors.ustc.edu.cn/archlinuxcn/<span class="hljs-variable">$arch</span> <span class="hljs-comment"># 中国科学技术大学开源镜像站</span>
Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/<span class="hljs-variable">$arch</span> <span class="hljs-comment"># 清华大学开源软件镜像站</span>
<span class="hljs-comment"># =========================</span>
<span class="hljs-comment"># 再次更新系统</span>
pacman -Syyu
<span class="hljs-comment"># 安装 KDE Plasma 桌面环境</span>
pacman -S plasma-meta konsole dolphin
<span class="hljs-comment"># (可选) 安装 wayland</span>
pacman -S  plasma-wayland-session xdg-desktop-portal
<span class="hljs-comment"># 配置并启动欢迎屏幕</span>
systemctl <span class="hljs-built_in">enable</span> --now sddm
<span class="hljs-comment"># 输入新用户密码即可登录桌面</span></code></pre></div><h2 id="图形界面的后续配置"><a href="#图形界面的后续配置" class="headerlink" title="图形界面的后续配置"></a>图形界面的后续配置</h2><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># 测试桌面环境网络连通性</span>
ping www.bilibili.com
<span class="hljs-comment"># 安装基础功能包</span>
sudo pacman -S ntfs-3g <span class="hljs-comment"># 使系统可以识别 NTFS 格式的硬盘</span>
sudo pacman -S adobe-source-han-serif-cn-fonts wqy-zenhei <span class="hljs-comment"># 安装几个开源中文字体。一般装上文泉驿就能解决大多 wine 应用中文方块的问题</span>
sudo pacman -S noto-fonts noto-fonts-cjk noto-fonts-emoji noto-fonts-extra <span class="hljs-comment"># 安装谷歌开源字体及表情</span>
sudo pacman -S firefox chromium <span class="hljs-comment"># 安装常用的火狐、chromium 浏览器</span>
sudo pacman -S ark <span class="hljs-comment"># 压缩软件。在 dolphin 中可用右键解压压缩包</span>
sudo pacman -S packagekit-qt5 packagekit appstream-qt appstream <span class="hljs-comment"># 确保 Discover（软件中心）可用，需重启</span>
sudo pacman -S gwenview <span class="hljs-comment"># 图片查看器</span>
sudo pacman -S steam <span class="hljs-comment"># 游戏商店。稍后看完显卡驱动章节再使用</span>
sudo pacman -S archlinuxcn-keyring <span class="hljs-comment"># cn 源中的签名（archlinuxcn-keyring 在 archlinuxcn）</span>
sudo pacman -S yay <span class="hljs-comment"># yay 命令可以让用户安装 AUR 中的软件（yay 在 archlinuxcn）</span>
<span class="hljs-comment"># 检查家目录下常见目录是否创建, 若未创建则需要手动创建</span>
<span class="hljs-built_in">cd</span> ~
<span class="hljs-built_in">ls</span> -hl
<span class="hljs-built_in">mkdir</span> Desktop Documents Downloads Music Pictures Videos</code></pre></div><h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><h3 id="出现-PGP-signature-Error"><a href="#出现-PGP-signature-Error" class="headerlink" title="出现 PGP signature Error"></a>出现 PGP signature Error</h3><div class="code-wrapper"><pre><code class="hljs bash">pacman-key --init
pacman-key --populate
pacman -S archlinux-keyring</code></pre></div><h3 id="显卡驱动问题"><a href="#显卡驱动问题" class="headerlink" title="显卡驱动问题"></a>显卡驱动问题</h3><p>NVIDIA 驱动未正常运行，具体现象为按步骤完成安装并进入桌面后打开应用很慢，且在终端执行 <code>nvtop</code> 显示无法找到显卡</p><p>经过排查后发现是由于 Linux 系统自带的 nouveau 比 NVIDIA 官方驱动更早启动，导致 NVIDIA 驱动无法正常运行。</p><p>解决方法如下</p><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># 查看启动时系统内核输出消息</span>
sudo dmesg
<span class="hljs-comment"># 禁用 Linux 自带的 nouveau 显卡驱动</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;blacklist nouveau&#x27;</span> &gt; /etc/modprobe.d/blacklist-nvidia-nouveau.conf
<span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;options nouveau modeset=0&#x27;</span> &gt;&gt; /etc/modprobe.d/blacklist-nvidia-nouveau.conf
<span class="hljs-comment"># 重新制作镜像</span>
sudo mkinitcpio -p linux</code></pre></div><h3 id="蓝牙耳机无法连接"><a href="#蓝牙耳机无法连接" class="headerlink" title="蓝牙耳机无法连接"></a>蓝牙耳机无法连接</h3><div class="code-wrapper"><pre><code class="hljs bash">sudo pacman -S pulseaudio
sudo pacman -S pulseaudio-bluetooth</code></pre></div><h3 id="Dolphin-预览-avif-格式的图片-2"><a href="#Dolphin-预览-avif-格式的图片-2" class="headerlink" title="Dolphin 预览 avif 格式的图片 2"></a>Dolphin 预览 avif 格式的图片 2</h3><div class="code-wrapper"><pre><code class="hljs bash">sudo pacman -S kimageformats
sudo pacman -S shared-mime-info
sudo pacman -S libavif</code></pre></div><h3 id="crontab-报错：-usr-bin-vi-exited-with-status-127"><a href="#crontab-报错：-usr-bin-vi-exited-with-status-127" class="headerlink" title="crontab 报错：&quot;/usr/bin/vi&quot; exited with status 127"></a>crontab 报错：<code>&quot;/usr/bin/vi&quot; exited with status 127</code></h3><div class="code-wrapper"><pre><code class="hljs bash">sudo vim ~/.profile
<span class="hljs-comment"># ========================================</span>
EDITOR=<span class="hljs-string">&#x27;/bin/vim&#x27;</span>
VISUAL=<span class="hljs-string">&#x27;/bin/vim&#x27;</span>
<span class="hljs-built_in">export</span> EDITOR VISUAL
<span class="hljs-comment"># ========================================</span></code></pre></div><h3 id="Gwenview-无法显示-webp-图像"><a href="#Gwenview-无法显示-webp-图像" class="headerlink" title="Gwenview 无法显示 webp 图像"></a>Gwenview 无法显示 webp 图像</h3><div class="code-wrapper"><pre><code class="hljs bash">sudo pacman -S qt5-imageformats</code></pre></div><h2 id="编程环境配置"><a href="#编程环境配置" class="headerlink" title="编程环境配置"></a>编程环境配置</h2><h3 id="OpenCV（C-和-Python）"><a href="#OpenCV（C-和-Python）" class="headerlink" title="OpenCV（C++ 和 Python）"></a>OpenCV（C++ 和 Python）</h3><ol><li><p>安装依赖包</p><div class="code-wrapper"><pre><code class="hljs bash">sudo pacman -S opencv hdf5 tk
pip install opencv-python</code></pre></div></li><li><p>编辑项目的 CMake 文件，添加如下两行（仅 C++ 需要）</p><div class="code-wrapper"><pre><code class="hljs cmake"><span class="hljs-keyword">find_package</span> (OpenCV <span class="hljs-number">4.0</span>.<span class="hljs-number">0</span> REQUIRED)
<span class="hljs-keyword">include_directories</span> (<span class="hljs-string">&quot;/usr/include/opencv4/&quot;</span>)</code></pre></div></li></ol><h3 id="C-Boost-库"><a href="#C-Boost-库" class="headerlink" title="C++ Boost 库"></a>C++ Boost 库</h3><div class="code-wrapper"><pre><code class="hljs bash">sudo pacman -Ss boost</code></pre></div><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ol><li><a target="_blank" rel="noopener" href="https://arch-linux.osrc.com/">archlinux 简明指南</a></li><li><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/NVIDIA">NVIDIA - ArchWiki</a></li></ol></div><hr><div><div class="post-metas my-3"><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/hexo-blog/tags/Linux/" class="print-no-link">#Linux</a></div></div><div class="license-box my-3"><div class="license-title"><div>Arch Linux 安装全过程</div><div>https://schenga39.github.io/hexo-blog/2023/09/27/Arch-Linux-安装全过程/</div></div><div class="license-meta"><div class="license-meta-item license-meta-date"><div>发布于</div><div>2023年9月28日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/hexo-blog/2023/10/07/Linux-Wine-%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/" title="Linux Wine 使用指南"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Linux Wine 使用指南</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/hexo-blog/2023/06/11/Linux-sysctl-%E8%B0%83%E4%BC%98%E5%AE%9E%E6%88%98/" title="Linux sysctl 调优实战"><span class="hidden-mobile">Linux sysctl 调优实战</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a><i class="iconfont icon-love"></i><a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/hexo-blog/js/events.js"></script><script src="/hexo-blog/js/plugins.js"></script><script src="/hexo-blog/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.20.1/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var o=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-o},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/hexo-blog/js/local-search.js"></script><script src="/hexo-blog/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>